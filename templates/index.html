<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <title>GST Search</title>
</head>

<body>
    <nav class="navbar navbar-dark bg-dark">
        <a class="navbar-brand"" >
            <h1> </h1>
        </a>
    </nav>

    <nav class=" navbar navbar-expand-lg navbar-dark bg-dark ">
        <a class=" navbar-brand" href="#">
            <h1> </h1>
        </a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav"
            aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse nav justify-content-center" id="navbarNav">
            <ul class="navbar-nav">
                <li class="nav-item active">
                    <a class="nav-link" href="#">Home <span class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#" style="color: white;">Features</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#" style="color: white;">Pricing</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" style="color: white;">Disabled</a>
                </li>
            </ul>
        </div>
    </nav>
    <div class="container mt-5">
        <h2>Goods and Services Tax (GST) Details Search</h2>
        <form id="searchForm" onsubmit="validateAndSearch(); return false;">
            <div class="form-group">
                <label for="gstNumber"></label>
                <input type="text" class="form-control" id="gstNumber"
                    placeholder="Enter GST number (must have 15 characters)" required
                    oninput="this.value = this.value.toUpperCase()">
                <large id="errorText" class="text-danger" style="display: none;">GST number must be 15 characters long
                    !!</small>
            </div>
            <button type="submit" class="btn btn-primary">Search</button>
        </form>
        <div id="result" class="mt-3">
            <div class="card" style="display: none;">
                <div class="card-body" id="resultCardBody">
                </div>
            </div>
        </div>

    </div>
    <br><br>

    <div class="div ">
        <div class="row ">
            <div class="col-4">
                <div class="card" style="width: 18rem;">
                    <div class="card-body">
                        <h1>Click to copy</h1><br>
                        <h5 class="copyText" onclick="copyToClipboard(this)">18AABCU9603R1ZM</h5>
                        <h5 class="copyText" onclick="copyToClipboard(this)">10AABCU9603R1Z2</h5>
                        <h5 class="copyText" onclick="copyToClipboard(this)">04AABCU9603R1ZV</h5>
                        <h5 class="copyText" onclick="copyToClipboard(this)">22AABCU9603R1ZX</h5>
                        <h5 class="copyText" onclick="copyToClipboard(this)">30AABCU9603R1Z0</h5>
                        <h5 class="copyText" onclick="copyToClipboard(this)">06AABCU9603R1ZR</h5>
                        <h5 class="copyText" onclick="copyToClipboard(this)">02AABCU9603R1ZZ</h5>
                        <h5 class="copyText" onclick="copyToClipboard(this)">20AABCU9603R1Z1</h5>
                    </div>
                </div>
            </div>
            <div class="col">
                <div class="card" style="width: 18rem;">
                    <div class="card-body">
                        <h1>Click to copy</h1><br>
                        <h5 class="copyText" onclick="copyToClipboard(this)">18AABCU9603R1ZM</h5>
                        <h5 class="copyText" onclick="copyToClipboard(this)">10AABCU9603R1Z2</h5>
                        <h5 class="copyText" onclick="copyToClipboard(this)">04AABCU9603R1ZV</h5>
                        <h5 class="copyText" onclick="copyToClipboard(this)">22AABCU9603R1ZX</h5>
                        <h5 class="copyText" onclick="copyToClipboard(this)">30AABCU9603R1Z0</h5>
                        <h5 class="copyText" onclick="copyToClipboard(this)">06AABCU9603R1ZR</h5>
                        <h5 class="copyText" onclick="copyToClipboard(this)">02AABCU9603R1ZZ</h5>
                        <h5 class="copyText" onclick="copyToClipboard(this)">20AABCU9603R1Z1</h5>
                    </div>
                </div>
            </div>
        </div>
    </div>









    <script>
        function validateAndSearch() {
            var gstNumberInput = document.getElementById("gstNumber");
            var errorText = document.getElementById("errorText");

            // Check if the GST number is 15 characters long
            if (gstNumberInput.value.length !== 15) {
                errorText.style.display = "block";
                return;
            }

            // Hide the error message if the length is correct
            errorText.style.display = "none";

            // Proceed with the search
            search();
        }

        function search() {
            var gstNumber = document.getElementById("gstNumber").value;
            var resultCard = document.querySelector(".card");

            fetch("/search/" + gstNumber)
                .then(response => {
                    if (!response.ok) {
                        throw new Error('GST number not found');
                    }
                    return response.json();
                })
                .then(data => {
                    console.log('Parsed JSON data:', data);
                    var resultCardBody = document.getElementById("resultCardBody");
                    resultCardBody.innerHTML = "<p><b>GST Number: </b>" + data.gst_number + "</p><p><b>Company Name: </b>" + data.company_name + "</p><p><b>State: </b>" + data.state + "</p><p><b>PAN Number: </b>" + data.pan_number + "</p>";
                    resultCard.style.display = "block";  // Show the card
                })
                .catch(error => {
                    console.error('Error parsing JSON:', error);
                    var resultCardBody = document.getElementById("resultCardBody");
                    resultCardBody.innerHTML = "<p>GST number not Valid or Not found in our Database.</p>";
                    resultCard.style.display = "block";  // Hide the card
                });
        }
    </script>

    <script>
        function copyToClipboard(element) {
            // Get the text content from the clicked element
            var textToCopy = element.innerText;

            // Create a temporary input element
            var tempInput = document.createElement("input");
            tempInput.value = textToCopy;

            // Append the input element to the DOM
            document.body.appendChild(tempInput);

            // Select the text inside the input element
            tempInput.select();

            // Execute the "copy" command
            document.execCommand("copy");

            // Remove the temporary input element
            document.body.removeChild(tempInput);

            // Show a message indicating that the text has been copied
            alert("Copied: " + textToCopy);
        }
    </script>

</body>

</html>